#!/bin/sh

cd "$(dirname "$0")"

#for f in $(find ./ -name '*.js')
find './' -name '*.json' | while read f
do
    echo $(basename "$f")

    if [ "$(basename "$f")" != "index.json" ]
    then
	   cd "$(dirname "$0")/$(dirname "$f")"
       #Fix Texture Path
       #============================
       #cat "$(basename "$f")" | sed -e "s/\"mapDiffuse\": \"/\"mapDiffuse\": \"Textures\\/g" > "$(basename "$f").txt"

       #Zip 3D Model
       #============================
	   #zip "${f%.*}.jsz" "${f%.*}.js"
       rm "$(basename "$f" .json).jsz"
	   zip "$(basename "$f" .json).jsz" "$(basename "$f")"
	   #tar -czf "${f%.*}.jsz" "$f"
    fi
done

#Encrypt 3D Models
#============================
#for f in $(find ./ -name '*.jsz')
#do
	#openssl base64 -in "$f" -out "$f.base64"
	#base64  -i "$f" -o "$f.base64"
#done
